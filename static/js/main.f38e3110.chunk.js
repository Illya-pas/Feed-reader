(this["webpackJsonpfeed-reader"]=this["webpackJsonpfeed-reader"]||[]).push([[0],{41:function(e,t,r){},44:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r(0),a=r.n(c),s=r(17),i=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,45)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},l=r(12),o=r(4),u=r(26),d=r(2),j="CREATE_ARTICLE",b="DELETE_ARTICLE",p="FETCH_ARTICLES",h="HIDE_LOADER",m="SHOW_LOADER",O="SHOW_ALERT",f="HIDE_ALERT",x="SET_USER_DATA",v="FETCH_USER_ARTICLES",y="SET_CURRENT_ARTICLE",g={articles:[],serverArticles:[],currentArticle:null},N={loading:!0,alert:null},w={id:null,username:null,email:null,authorized:!1},E=Object(l.c)({articles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(d.a)(Object(d.a)({},e),{},{articles:e.articles.concat([t.payload])});case b:return Object(d.a)(Object(d.a)({},e),{},{articles:e.articles.filter((function(e){return e.id!==t.payload}))});case p:return Object(d.a)(Object(d.a)({},e),{},{serverArticles:t.payload});case v:return Object(d.a)(Object(d.a)({},e),{},{articles:t.payload});case y:return Object(d.a)(Object(d.a)({},e),{},{currentArticle:t.payload});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(d.a)(Object(d.a)({},e),{},{loading:!1});case m:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case O:return Object(d.a)(Object(d.a)({},e),{},{alert:t.payload});case f:return Object(d.a)(Object(d.a)({},e),{},{alert:null});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(d.a)(Object(d.a)({},e),t.payload);default:return e}}}),T=(r(41),r(15)),S=r(27),A=r(28),C=r(31),_=r(30),L=r(6),k=r.n(L),I=r(13),D=!1;function F(){return{type:h}}function R(){return{type:m}}function U(e){return function(t){t({type:O,payload:e}),setTimeout((function(){t({type:f})}),3e3)}}function H(e){return window.location.href=e}function P(){return JSON.parse(localStorage.getItem("user"))}function J(){return Object(I.a)(k.a.mark((function e(){var t,r,n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://cors-anywhere.herokuapp.com/https://www.nasa.gov/rss/dyn/breaking_news.rss");case 3:return r=e.sent,e.next=6,r.text();case 6:return n=e.sent,e.next=9,(new window.DOMParser).parseFromString(n,"text/xml");case 9:return c=e.sent,e.next=12,c.querySelectorAll("item");case 12:return e.sent.forEach((function(e){var r={id:e.getElementsByTagName("dc:identifier")[0].innerHTML,title:e.querySelector("title").innerHTML,body:e.querySelector("description").innerHTML,img:e.querySelector("enclosure").getAttribute("url"),pubDate:e.querySelector("pubDate").innerHTML};t.push(r)})),e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})))}var z=function(e){var t=e.alertText;return Object(n.jsx)("div",{className:"alert alert-warning",role:"alert",children:t})},q=function(e){Object(C.a)(r,e);var t=Object(_.a)(r);function r(e){var n;return Object(S.a)(this,r),(n=t.call(this,e)).addArticle=function(e){e.preventDefault();var t=n.state.title,r=n.state.body,c=n.state.user;n.state.articlesCounter;if(!t.trim()||!r.trim())return n.props.showAlert("Fields can't be empty!");if(null===c)return H("http://localhost:3000/login/");n.setState({articlesCounter:n.state.articlesCounter+1});var a={userId:c.id,id:n.state.articlesCounter,title:t,body:r};n.props.createArticle(a),n.setState({title:"",body:""})},n.changeInputValue=function(e){n.setState((function(t){return Object(d.a)(Object(d.a)({},t),Object(T.a)({},e.target.name,e.target.value))}))},n.state={title:"",body:"",user:P(),articlesCounter:1},n}return Object(A.a)(r,[{key:"render",value:function(){return Object(n.jsxs)("form",{onSubmit:this.addArticle,children:[this.props.alert&&Object(n.jsx)(z,{alertText:this.props.alert}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"title",children:"Article Title"}),Object(n.jsx)("input",{placeholder:"Title",type:"text",className:"form-control",name:"title",value:this.state.title,onChange:this.changeInputValue,id:"title"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"body",children:"Article Body"}),Object(n.jsx)("textarea",{className:"form-control",placeholder:"Body",id:"body",rows:"3",name:"body",value:this.state.body,onChange:this.changeInputValue})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add"})]})}}]),r}(a.a.Component),B={createArticle:function(e){return function(){var t=Object(I.a)(k.a.mark((function t(r){var n,c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://jsonplaceholder.typicode.com/posts/"+e.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,r({type:j,payload:c}),console.log(c);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},showAlert:U},M=Object(o.b)((function(e){return{alert:e.app.alert}}),B)(q);function V(e){var t=e.article,r=Object(o.c)();return Object(n.jsx)("div",{className:"card mt-2",children:Object(n.jsxs)("div",{className:"card-body pt-1 pl-4",children:[Object(n.jsxs)("div",{className:"row flex-nowrap",children:[Object(n.jsx)("h5",{className:"card-title col pt-3 pl-0",children:t.title.slice(0,100)}),Object(n.jsx)("button",{onClick:function(){return r(function(e){return function(){var t=Object(I.a)(k.a.mark((function t(r){var n,c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://jsonplaceholder.typicode.com/posts/"+e.id,{method:"DELETE",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,console.log(c),r({type:b,payload:e.id}),console.log(e.id);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},className:"btn btn-warning col-sm-1 mb-3",children:"\u274c"})]}),Object(n.jsx)("p",{className:"card-text row",children:t.body.slice(0,200)+"..."})]})})}var X=function(){var e=Object(o.d)((function(e){return e.articles.articles})),t=P(),r=Object(o.c)();return Object(c.useEffect)((function(){var e;r((e=t,function(){var t=Object(I.a)(k.a.mark((function t(r){var n,c,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e){t.next=12;break}return t.next=3,fetch("https://jsonplaceholder.typicode.com/posts");case 3:return n=t.sent,t.next=6,n.json();case 6:c=t.sent,a=[],c.map((function(t){if(t.userId===e.id&&a.length<3)return a.push(t)})),r({type:v,payload:a}),t.next=13;break;case 12:return t.abrupt("return");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[]),e.length?e.map((function(e){return Object(n.jsx)(V,{article:e},e.id)})):Object(n.jsx)("p",{className:"text-center",children:"No articles yet..."})},W=r(11);function G(e){var t=e.article,r=Object(o.c)();return Object(n.jsx)(W.b,{to:"/article/"+t.id,className:"card mt-2",onClick:function(){return r(R())},children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h5",{className:"card-title",children:t.title.slice(0,100)}),Object(n.jsx)("p",{className:"card-text",children:t.pubDate})]})})}var K=function(e){var t=e.size;return Object(n.jsx)("div",{className:"spinner-border text-primary",style:{height:t,width:t},role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})},Q=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.articles.serverArticles})),r=Object(o.d)((function(e){return e.app.loading}));return Object(c.useEffect)((function(){e(function(){var e=Object(I.a)(k.a.mark((function e(t){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(J());case 2:r=e.sent,t({type:p,payload:r}),t(F());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),r?Object(n.jsx)(K,{size:40}):t.length?t.map((function(e){return Object(n.jsx)(G,{article:e},e.id)})):Object(n.jsx)("p",{className:"text-center",children:"No server articles yet..."})},Y=function(e){var t=Object(o.c)();return Object(n.jsx)(n.Fragment,{children:e.isAuth?Object(n.jsx)("div",{className:"row float-right m-2",children:Object(n.jsx)(W.b,{to:"/login",onClick:function(){t({type:x,payload:{id:null,username:null,email:null,authorized:!1}}),localStorage.removeItem("user")},className:"btn btn-danger",children:"Logout"})}):Object(n.jsx)("div",{className:"row float-right m-2",children:Object(n.jsx)(W.b,{to:"/login",className:"btn btn-success",children:"Login"})})})};function Z(){var e;return e=null!=JSON.parse(localStorage.getItem("user")),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Y,{isAuth:e}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col",children:Object(n.jsx)(M,{})})}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col mt-3",children:[Object(n.jsx)("h3",{className:"pb-2",children:"Our Articles"}),Object(n.jsx)(X,{})]}),Object(n.jsxs)("div",{className:"server col mt-3",children:[Object(n.jsx)("h3",{children:"Server Articles"}),Object(n.jsx)(Q,{})]})]})]})}var $=r(29),ee=function(e){var t=Object(o.d)((function(e){return e.app.alert})),r=Object(o.c)(),c=a.a.useState({username:"",email:""}),s=Object($.a)(c,2),i=s[0],l=s[1],u=function(e){if(e.preventDefault(),!i.username.trim()||!i.email.trim())return r(U("Fields can't be empty!"));var t;r((t=i,function(){var e=Object(I.a)(k.a.mark((function e(r){var n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch("https://jsonplaceholder.typicode.com/users");case 3:return n=e.sent,e.next=6,n.json();case 6:(c=e.sent).forEach((function(e){if(e.username!==t.username||e.email!==t.email)return e.id!==c.length-1||D?void 0:r(U("Incorrect Username or Password"));var n={id:e.id,username:e.username,email:e.email,authorized:!0};r({type:x,payload:n}),localStorage.setItem("user",JSON.stringify(n)),r(H("http://localhost:3000/")),D=!0}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),l({username:"",email:""})},j=function(e){l((function(t){return Object(d.a)(Object(d.a)({},t),Object(T.a)({},e.target.name,e.target.value))}))};return Object(n.jsxs)("form",{className:"login d-flex flex-column justify-content-center align-items-center ",onSubmit:function(e){return u(e)},children:[t&&Object(n.jsx)(z,{alertText:t}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"Username",children:"Username"}),Object(n.jsx)("input",{placeholder:"Username",type:"text",className:"form-control",name:"username",value:i.username,onChange:function(e){return j(e)},id:"Username"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"Password",children:"Password"}),Object(n.jsx)("input",{placeholder:"Password",type:"password",className:"form-control",name:"email",value:i.email,onChange:function(e){return j(e)},id:"Password"})]}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})})]})},te=r(5),re=function(){return Object(n.jsx)("div",{className:"d-flex justify-content-center align-items-center not-found",children:Object(n.jsxs)("h1",{className:"d-flex flex-column align-items-center",children:[Object(n.jsx)("p",{children:"404"})," NOT FOUND"]})})},ne=function(){var e=Object(o.c)(),t=window.location.href.slice(30,window.location.href.length),r=Object(o.d)((function(e){return e.app.loading}));Object(c.useEffect)((function(){e(function(e){return function(){var t=Object(I.a)(k.a.mark((function t(r){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,t.next=3,r(J());case 3:t.sent.map((function(t){return n++,e===t.id?r({type:y,payload:t}):e!==t.id&&n===t.length?r({type:y,payload:null}):void 0})),r(F());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[]);var a=Object(o.d)((function(e){return e.articles.currentArticle}));return r?Object(n.jsx)("div",{className:"loader-div",children:Object(n.jsx)(K,{size:120})}):null===a?Object(n.jsx)(re,{}):Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"card current-article",children:[Object(n.jsx)("img",{src:a.img,className:"card-img-top",alt:""}),Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("h4",{className:"card-title",children:a.title}),Object(n.jsx)("p",{className:"card-text",children:a.body}),Object(n.jsx)("p",{className:"card-text",children:a.pubDate})]}),Object(n.jsx)(W.b,{to:"/",className:"btn btn-primary",onClick:function(){return e(R())},children:"To main"})]})]})})};var ce=function(){return Object(n.jsx)("div",{className:"main-block bg-dark",children:Object(n.jsx)("div",{className:"container pt-3 main-block-container",children:Object(n.jsx)(W.a,{children:Object(n.jsxs)(te.c,{children:[Object(n.jsx)(te.a,{exact:!0,path:"/",component:Z}),Object(n.jsx)(te.a,{path:"/login",component:ee}),Object(n.jsx)(te.a,{path:"/article/",component:ne}),Object(n.jsx)(te.a,{path:"/",component:re})]})})})})},ae=Object(l.e)(E,Object(l.d)(Object(l.a)(u.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),se=Object(n.jsx)(o.a,{store:ae,children:Object(n.jsx)(ce,{})});Object(s.render)(se,document.getElementById("root")),i()}},[[44,1,2]]]);
//# sourceMappingURL=main.f38e3110.chunk.js.map